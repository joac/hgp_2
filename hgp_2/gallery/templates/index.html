{% extends 'base_layout.html' %}
{% load staticfiles %}
{% load embed_video_tags %}
{% block pagetitle %}{{ album.name.title }}{% endblock %}
{% block body %}
<div id="portfolio">
    {% for res in album.get_all_resources %}
        {% if res.photo %}
        <img title="{{ res.description }}" 
        data-src="{{ res.photo.file.url }}"
        alt="{{ res.photo.title }}"
        />
        {% endif %}
     {% endfor %}
</div>
<script>
    $(document).ready(function() {
        var $footer = $(".footer"), $heading = $('.heading'), $window = $(window);
        function get_height() {
            var content_height = $window.outerHeight() - 
                ($footer.outerHeight(true) + $heading.outerHeight(true)) + 'px';
            return content_height;
        };
        var $p = $("#portfolio"),
            p = $p.portfolio({
              height: get_height(),
              width: '100%',
              showArrows: true,
              //lightbox: true,
            });
        p.init();
        var gallery = $p;
        $(window).resize(function() {
            var content_height = get_height();
            console.log(content_height);
            $(gallery).css({
                height: content_height,
                "max-height": content_height,
            });
            $(gallery).find('img').css({height: content_height});
            $('.gallery-arrow-right').css({height: content_height}); 
            $('.gallery-arrow-left').css({height: content_height}); 
            $('.spinner-container').css({height: content_height}); 
        });
        p.css({"overflow-x": 'hidden'})
        
    });
</script>
{% endblock %}
